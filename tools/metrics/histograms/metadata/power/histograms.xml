<!--
Copyright 2020 The Chromium Authors. All rights reserved.
Use of this source code is governed by a BSD-style license that can be
found in the LICENSE file.
-->

<!--
This file is used to generate a comprehensive list of Power histograms
along with a detailed description for each histogram.

For best practices on writing histogram descriptions, see
https://chromium.googlesource.com/chromium/src.git/+/HEAD/tools/metrics/histograms/README.md

Please follow the instructions in the OWNERS file in this directory to find a
reviewer. If no OWNERS file exists, please consider signing up at
go/reviewing-metrics (Googlers only), as all subdirectories are expected to
have an OWNERS file. As a last resort you can send the CL to
chromium-metrics-reviews@google.com.
-->

<histogram-configuration>

<histograms>

<variants name="UsageScenario">
<!--
Also used in tools/metrics/histograms/metadata/others/histograms.xml
  When changing this variant changes need to verified against histograms there.
-->

  <variant name=".AllTabsHidden" summary="Chrome had tabs, but none visible"/>
  <variant name=".Audio"
      summary="Chrome had at least 1 visible tab and was audible, but there
               was no video playback or video capture"/>
  <variant name=".EmbeddedVideo_NoNavigation"
      summary="Chrome played a video in a visible tab, and there was no
               navigation or video capture"/>
  <variant name=".EmbeddedVideo_WithNavigation"
      summary="Chrome played a video in a visible tab, there was a
               navigation, but no video capture"/>
  <variant name=".FullscreenVideo"
      summary="Chrome played a video in fullscreen, and there was no video
               capture"/>
  <variant name=".Interaction"
      summary="Chrome had at least 1 visible tab and received a user
               interaction, but no navigation, audio, video playback or video
               capture"/>
  <variant name=".Navigation"
      summary="Chrome had at least 1 visible tab and a navigation, but no
               audio, video playback or video capture"/>
  <variant name=".Passive"
      summary="Chrome had at least 1 visible tab, but there was no user
               interaction, navigation, audio, video playback or video
               capture"/>
  <variant name=".VideoCapture"
      summary="Chrome had at least 1 visible tab and captured video"/>
  <variant name=".ZeroWindow" summary="Chrome had no window"/>
</variants>

<histogram name="Power.ApproxCpuTimeSecondsPerCoreTypeAndFrequency"
    units="50 MHz" expires_after="2022-04-24">
  <owner>eseckler@chromium.org</owner>
  <owner>skyostil@chromium.org</owner>
  <summary>
    Total seconds of CPU time consumed by Chrome, split by process type as well
    as core type and core frequency. Currently only implemented on Android. For
    every second of CPU time consumed by a process on a specific CPU core type
    and at a specific frequency, a sample is recorded into the bucket for the
    frequency range. Samples are recorded periodically depending on the task
    load of each process's main thread. The histogram thus shows the total sum
    of CPU time seconds spent for a specific process and core type across all
    users.

    Compared with Power.CpuTimeSecondsPerCoreTypeAndFrequency, the values in
    this histogram are approximated from more widely supported global
    per-CPU-core time_in_state stats, while
    Power.CpuTimeSecondsPerCoreTypeAndFrequency reads per-thread time_in_state
    stats that are only supported on newer Pixel devices (as of mid-2020).

    For a histogram of daily per-user values, select &quot;Per-Client
    Aggregation Mode&quot;.
  </summary>
</histogram>

<histogram name="Power.AvgCpuLoad.{ProcessType}" units="%"
    expires_after="2022-10-04">
  <owner>eseckler@chromium.org</owner>
  <owner>khokhlov@chromium.org</owner>
  <summary>
    Records the average CPU load caused by the corresponding process over the
    last 30 (or more) seconds. Emitted at the end of each such period, so not
    more often that once in 30 sec. Note that CPU load can be greater than 100%
    on milti-core systems.
  </summary>
  <token key="ProcessType">
    <variant name="Browser"/>
    <variant name="GPU"/>
    <variant name="Other"/>
    <variant name="Renderer"/>
  </token>
</histogram>

<histogram name="Power.BacklightLevelOnAC" units="%" expires_after="2022-04-17">
  <owner>puthik@chromium.org</owner>
  <owner>chromeos-platform-power@google.com</owner>
  <summary>
    The level of the backlight as a percentage when the user is on AC. Sampled
    every 30 seconds. Chrome OS only.
  </summary>
</histogram>

<histogram name="Power.BacklightLevelOnBattery" units="%"
    expires_after="2022-04-10">
  <owner>puthik@chromium.org</owner>
  <owner>chromeos-platform-power@google.com</owner>
  <summary>
    The level of the backlight as a percentage when the user is on battery.
    Sampled every 30 seconds. Chrome OS only.
  </summary>
</histogram>

<histogram name="Power.BatteryChargeHealth" units="%"
    expires_after="2022-04-24">
  <owner>puthik@chromium.org</owner>
  <owner>chromeos-platform-power@google.com</owner>
  <summary>
    Chrome OS battery charge health percentage. Sampled once when device starts
    charging.
  </summary>
</histogram>

<histogram name="Power.BatteryDischargeMode" enum="BatteryDischargeMode"
    expires_after="2022-04-10">
  <owner>etiennep@chromium.org</owner>
  <owner>olivierli@chromium.org</owner>
  <summary>
    Battery discharge mode describing whether BatteryDischargeRate2 could be
    reported or not, and why. Reported every time the battery charge level is
    sampled. This is reported on Mac and Windows. See
    go/chrome_power_use_per_scenario for more details.
  </summary>
</histogram>

<histogram name="Power.BatteryDischargeMode{UsageScenario}"
    enum="BatteryDischargeMode" expires_after="2021-11-26">
  <owner>etiennep@chromium.org</owner>
  <owner>olivierli@chromium.org</owner>
  <summary>
    See definition of Power.BatteryDischargeMode. This histogram is reported
    when the browser is under the {UsageScenario} usage scenario. See
    go/chrome_power_use_per_scenario for more details.
  </summary>
  <token key="UsageScenario" variants="UsageScenario"/>
</histogram>

<histogram name="Power.BatteryDischargeRate" units="mW"
    expires_after="2022-04-10">
  <owner>puthik@chromium.org</owner>
  <owner>chromeos-platform-power@google.com</owner>
  <summary>
    Chrome OS battery discharge rate in mW sampled every 30 seconds while the
    device runs on battery.
  </summary>
</histogram>

<histogram name="Power.BatteryDischargeRate2" units="hundredth of percent"
    expires_after="2022-04-10">
  <owner>etiennep@chromium.org</owner>
  <owner>olivierli@chromium.org</owner>
  <owner>lgrey@chromium.org</owner>
  <summary>
    Battery discharge rate per minute, with 1/10000 of full charge resolution,
    example: - Battery capacity = 4000 mAh; - Battery charge at the beginning of
    the interval: 3900 mAh; - Battery charge at the end of the interval: 3700
    mAh; - Discharge proportion: (3900-3700) / 4000 = 0.05 - Reported value:
    500. This metric is only recorded when on battery power. This is reported on
    Mac and Windows. See go/chrome_power_use_per_scenario for more details.
  </summary>
</histogram>

<histogram name="Power.BatteryDischargeRate2{UsageScenario}"
    units="hundredth of percent" expires_after="2021-11-26">
  <owner>etiennep@chromium.org</owner>
  <owner>olivierli@chromium.org</owner>
  <owner>lgrey@chromium.org</owner>
  <summary>
    See definition of Power.BatteryDischargeRate2. This histogram is reported
    when the browser is under the {UsageScenario} usage scenario. See
    go/chrome_power_use_per_scenario for more details.
  </summary>
  <token key="UsageScenario" variants="UsageScenario"/>
</histogram>

<histogram name="Power.BatteryDischargeRateWhileSuspended" units="mW"
    expires_after="2022-04-03">
  <owner>puthik@chromium.org</owner>
  <owner>chromeos-platform-power@google.com</owner>
  <summary>
    Chrome OS battery discharge rate in mW while the system was suspended,
    sampled at resume. Only reported if the system was on battery power both
    before suspending and after resuming, if the energy level didn't increase
    while suspended (which would indicate that an AC adapter was connected), and
    if the system was suspended for at least a minute.
  </summary>
</histogram>

<histogram name="Power.BatteryInfoSample" enum="BatteryInfoSampleResult"
    expires_after="2020-11-29">
  <owner>tbroch@chromium.org</owner>
  <summary>
    Counts the number of times we have read the battery status from sysfs and if
    it gave us sensible values. Chrome OS only.
  </summary>
</histogram>

<histogram name="Power.BatteryPercentDrop" units="%" expires_after="2022-04-10">
  <owner>ryansturm@chromium.org</owner>
  <owner>tbansal@chromium.org</owner>
  <summary>
    The drop in battery since the last operating system battery update as a
    percent of total device battery. If the drop is not a round percentage
    point, the unreported amount will be carried over until the battery level
    drops by a full percentage point. Recorded when the battery level drops by
    more than a percentage point. If the user charges the device, the battery
    tracking is reset (the amount carried over is reset). This histograms sum is
    most likely the most useful figure when comparing experiments. Recorded even
    when Chrome is in the background.
  </summary>
</histogram>

<histogram name="Power.BatteryRemainingAtEndOfSessionOnAC" units="%"
    expires_after="M85">
  <owner>tbroch@chromium.org</owner>
  <summary>
    Chrome OS remaining battery charge as percent of the maximum battery charge,
    sampled at the end of a user session when the device is on AC.
  </summary>
</histogram>

<histogram name="Power.BatteryRemainingAtEndOfSessionOnBattery" units="%"
    expires_after="2022-05-01">
  <owner>puthik@chromium.org</owner>
  <owner>chromeos-platform-power@google.com</owner>
  <summary>
    Chrome OS remaining battery charge as percent of the maximum battery charge,
    sampled at the end of a user session when the device is on battery.
  </summary>
</histogram>

<histogram name="Power.BatteryRemainingAtStartOfSessionOnAC" units="%"
    expires_after="2022-04-10">
  <owner>puthik@chromium.org</owner>
  <owner>chromeos-platform-power@google.com</owner>
  <summary>
    Chrome OS remaining battery charge as percent of the maximum battery charge,
    sampled at the start of a user session when the device is on AC.
  </summary>
</histogram>

<histogram name="Power.BatteryRemainingAtStartOfSessionOnBattery" units="%"
    expires_after="2021-03-15">
  <owner>tbroch@chromium.org</owner>
  <summary>
    Chrome OS remaining battery charge as percent of the maximum battery charge,
    sampled at the start of a user session when the device is on battery.
  </summary>
</histogram>

<histogram name="Power.BatteryRemainingWhenChargeStarts" units="%"
    expires_after="2022-05-01">
  <owner>puthik@chromium.org</owner>
  <owner>chromeos-platform-power@google.com</owner>
  <summary>
    Chrome OS remaining battery charge as percent of the maximum battery charge,
    sampled when charging starts.
  </summary>
</histogram>

<histogram name="Power.BatterySamplingDelay" units="microseconds"
    expires_after="2022-04-10">
  <owner>etiennep@chromium.org</owner>
  <owner>fdoray@chromium.org</owner>
  <summary>
    The delay in microseconds between the time a battery charge level query was
    schedule and the time the state is made available, reported everytime the
    battery charge level is sampled. Reported for all users on Windows and Mac.
  </summary>
</histogram>

<histogram name="Power.BitfixChunks" units="units" expires_after="M77">
  <owner>dianders@chromium.org</owner>
  <summary>
    Chrome OS (Snow RO firmware 2695.90.0 only) number of 8K chunks that were
    fixed (memory corruption corrected) for each suspend/resume cycle. Expect 0
    around 97% of the time and a non-zero value around 3% of the time.
  </summary>
</histogram>

<histogram name="Power.BitfixFixes" units="units" expires_after="M77">
  <owner>dianders@chromium.org</owner>
  <summary>
    Chrome OS (Snow RO firmware 2695.90.0 only) number of 4-byte words that were
    fixed (memory corruption corrected) for each suspend/resume cycle. Expect 0
    around 97% of the time and a non-zero value around 3% of the time. Would be
    exactly equal to Power.BitfixChunks if there were only one corrupted word in
    each chunk but is sometimes several times higher.
  </summary>
</histogram>

<histogram name="Power.ConnectedChargingPorts"
    enum="PowerConnectedChargingPorts" expires_after="2022-04-24">
  <owner>bleung@chromium.org</owner>
  <owner>puthik@chromium.org</owner>
  <owner>chromeos-platform-power@google.com</owner>
  <summary>
    Connected charging ports on Chrome OS. A sample is reported every time that
    the power manager polls sysfs (typically every 30 seconds). Ordinals are
    assigned based on the lexicographical ordering of power supply names from
    sysfs and have no implied correspondence with ports' physical locations. For
    example, with ports 'CROS_USB_PD_CHARGER0' and 'CROS_USB_PD_CHARGER1',
    'first' refers to the former and 'second' to the latter. To determine a
    port's physical location, see the powerd charging_ports pref in the device's
    overlay.
  </summary>
</histogram>

<histogram name="Power.CpuAffinityExperiments.ProcessAffinityMode"
    enum="CpuAffinityMode" expires_after="2022-10-04">
  <owner>eseckler@chromium.org</owner>
  <owner>skyostil@chromium.org</owner>
  <summary>
    For clients enrolled in CPU affinity restriction experiments (e.g.
    restricting execution to little cores only), records the new CPU affinity
    for a process every time it is changed, provided it was succcessfully set.
  </summary>
</histogram>

<histogram name="Power.CpuAffinityExperiments.ProcessAffinityUpdateSuccess"
    enum="BooleanSuccess" expires_after="2022-10-04">
  <owner>eseckler@chromium.org</owner>
  <owner>skyostil@chromium.org</owner>
  <summary>
    For clients enrolled in CPU affinity restriction experiments (e.g.
    restricting execution to little cores only), records whether the CPU
    affinity for a process could be succcessfully set.
  </summary>
</histogram>

<histogram name="Power.CpuTimeSecondsPerCoreTypeAndFrequency" units="50 MHz"
    expires_after="2022-03-06">
  <owner>eseckler@chromium.org</owner>
  <owner>skyostil@chromium.org</owner>
  <summary>
    Total seconds of CPU time consumed by Chrome, split by process type as well
    as core type and core frequency. Currently only implemented on Android. For
    every second of CPU time consumed by a process on a specific CPU core type
    and at a specific frequency, a sample is recorded into the bucket for the
    frequency range. Samples are recorded periodically depending on the task
    load of each process's main thread. The histogram thus shows the total sum
    of CPU time seconds spent for a specific process and core type across all
    users.

    For a histogram of daily per-user values, select &quot;Per-Client
    Aggregation Mode&quot;.
  </summary>
</histogram>

<histogram name="Power.CpuTimeSecondsPerPowerMode.{ProcessType}"
    enum="PowerMode" expires_after="2021-12-31">
  <owner>eseckler@chromium.org</owner>
  <owner>skyostil@chromium.org</owner>
  <summary>
    Total seconds of CPU time consumed by Chrome's {ProcessType} process, split
    by power mode. Currently only implemented on Android. For every second of
    CPU time consumed by the process, while a specific PowerMode was active, a
    sample is recorded into the bucket for the PowerMode. Samples are recorded
    periodically depending on the task load of each process's main thread. The
    histogram thus shows the total sum of CPU time seconds spent per PowerMode
    within all {ProcessType} processes across all users.

    For a histogram of daily per-user values, select &quot;Per-Client
    Aggregation Mode&quot;.
  </summary>
  <token key="ProcessType">
    <variant name="Browser" summary="browser"/>
    <variant name="GPU" summary="GPU"/>
    <variant name="Other" summary="other type of"/>
    <variant name="Renderer" summary="renderer"/>
  </token>
</histogram>

<histogram name="Power.CpuTimeSecondsPerProcessType" enum="ProcessType2"
    expires_after="2022-04-03">
  <owner>eseckler@chromium.org</owner>
  <owner>skyostil@chromium.org</owner>
  <summary>
    Total seconds of CPU time consumed by Chrome, split by process type.
    Currently only implemented on Android. For every second of CPU time consumed
    by one process, a sample is recorded into the bucket for the process's type.
    Samples are recorded periodically depending on the task load of each
    process's main thread. The histogram thus shows the total sum of CPU time
    seconds spent per process type across all users.

    For a histogram of daily per-user values, select &quot;Per-Client
    Aggregation Mode&quot;.
  </summary>
</histogram>

<histogram name="Power.CpuTimeSecondsPerProcessType.{Visibility}"
    enum="ProcessType2" expires_after="2022-07-18">
  <owner>eseckler@chromium.org</owner>
  <owner>skyostil@chromium.org</owner>
  <summary>
    Total seconds of CPU time consumed by Chrome/WebView in the {Visibility}
    state, split by process type. Currently only implemented on Android. For
    every second of CPU time consumed by one process, a sample is recorded into
    the bucket for the process's type. Samples are recorded periodically
    depending on the task load of each process's main thread. The histogram thus
    shows the total sum of CPU time seconds spent per process type across all
    users.

    For a histogram of daily per-user values, select &quot;Per-Client
    Aggregation Mode&quot;.
  </summary>
  <token key="Visibility">
    <variant name="Background" summary="backgrounded"/>
    <variant name="Foreground" summary="foregrounded"/>
    <variant name="Unattributed" summary="undetermined visibility"/>
  </token>
</histogram>

<histogram name="Power.CpuTimeSecondsPerThreadType.{ProcessType}"
    enum="CpuTimeMetricsThreadType" expires_after="2022-10-04">
  <owner>eseckler@chromium.org</owner>
  <owner>skyostil@chromium.org</owner>
  <summary>
    Total seconds of CPU time consumed by Chrome's {ProcessType} process, split
    by thread type. Currently only implemented on Android. For every second of
    CPU time consumed by one thread, a sample is recorded into the bucket for
    the thread's type. CPU time consumed by a process that cannot be attributed
    to a specific thread is recorded into the &quot;UnattributedThread&quot;
    bucket. Samples are recorded periodically depending on the task load of each
    process's main thread. The histogram thus shows the total sum of CPU time
    seconds spent per thread type (within {ProcessType} processes) across all
    users.

    For a histogram of daily per-user values, select &quot;Per-Client
    Aggregation Mode&quot;.
  </summary>
  <token key="ProcessType">
    <variant name="Browser" summary="browser"/>
    <variant name="GPU" summary="GPU"/>
    <variant name="Other" summary="other type of"/>
    <variant name="Renderer" summary="renderer"/>
  </token>
</histogram>

<histogram name="Power.DarkResumeWakeDurationMs" units="ms" expires_after="M85">
  <owner>chirantan@chromium.org</owner>
  <owner>abhishekbh@chromium.org</owner>
  <owner>ravisadineni@chromium.org</owner>
  <summary>
    The amount of time a system spent awake every time it woke up in dark
    resume.
  </summary>
</histogram>

<histogram name="Power.DarkResumeWakeDurationMs.Other" units="ms"
    expires_after="2020-08-02">
  <owner>chirantan@chromium.org</owner>
  <owner>abhishekbh@chromium.org</owner>
  <owner>ravisadineni@chromium.org</owner>
  <summary>
    The amount of time a system spent awake every time it woke up in dark resume
    triggered by an unknown or unsupported wake trigger.
  </summary>
</histogram>

<histogram name="Power.DarkResumeWakeDurationMs.WiFi.Disconnect" units="ms"
    expires_after="M85">
  <owner>chirantan@chromium.org</owner>
  <owner>abhishekbh@chromium.org</owner>
  <owner>ravisadineni@chromium.org</owner>
  <summary>
    The amount of time a system spent awake every time it woke up in dark resume
    triggered by a WiFi disconnect.
  </summary>
</histogram>

<histogram name="Power.DarkResumeWakeDurationMs.WiFi.Pattern" units="ms"
    expires_after="M85">
  <owner>chirantan@chromium.org</owner>
  <owner>abhishekbh@chromium.org</owner>
  <owner>ravisadineni@chromium.org</owner>
  <summary>
    The amount of time a system spent awake every time it woke up in dark resume
    triggered by a WiFi packet pattern match.
  </summary>
</histogram>

<histogram name="Power.DarkResumeWakeDurationMs.WiFi.SSID" units="ms"
    expires_after="M85">
  <owner>chirantan@chromium.org</owner>
  <owner>abhishekbh@chromium.org</owner>
  <owner>ravisadineni@chromium.org</owner>
  <summary>
    The amount of time a system spent awake every time it woke up in dark resume
    triggered by a net detect SSID match.
  </summary>
</histogram>

<histogram name="Power.DarkResumeWakeupsPerHour" units="units"
    expires_after="2020-08-02">
  <owner>chirantan@chromium.org</owner>
  <summary>
    The number of times a system woke up in dark resume in an hour. Note that
    this value is scaled up or down to an hour based on the amount of time the
    system spent in suspend. So if the system suspended for 20 minutes and woke
    up 3 times, it would report a value of 9.
  </summary>
</histogram>

<histogram name="Power.ExternalBrightnessReadResult"
    enum="ExternalDisplayReceiveResult" expires_after="2022-05-01">
  <owner>puthik@chromium.org</owner>
  <owner>chromeos-platform-power@google.com</owner>
  <summary>
    The result of attempting to read an external display's brightness on Chrome
    OS. A read attempt is made after successfully requesting the brightness (see
    Power.ExternalBrightnessRequestResult).
  </summary>
</histogram>

<histogram name="Power.ExternalBrightnessRequestResult"
    enum="ExternalDisplaySendResult" expires_after="M100">
  <owner>puthik@chromium.org</owner>
  <owner>chromeos-platform-power@google.com</owner>
  <summary>
    The result of requesting an external display's brightness on Chrome OS. A
    request is sent when the user presses a brightness key and the current
    brightness is not already cached. A successful request is followed shortly
    thereafter by a read attempt (see Power.ExternalBrightnessReadResult).
  </summary>
</histogram>

<histogram name="Power.ExternalBrightnessWriteResult"
    enum="ExternalDisplaySendResult" expires_after="M100">
  <owner>puthik@chromium.org</owner>
  <owner>chromeos-platform-power@google.com</owner>
  <summary>
    The result of attempting to change an external display's brightness on
    Chrome OS. A request is sent when the user presses a brightness key and the
    current brightness is either already cached or successfully loaded.
  </summary>
</histogram>

<histogram name="Power.ExternalDisplayOpenResult"
    enum="ExternalDisplayOpenResult" expires_after="2021-08-01">
  <owner>puthik@chromium.org</owner>
  <owner>chromeos-platform-power@google.com</owner>
  <summary>
    The result of attempting to open an I2C device to control an external
    display's brightness on Chrome OS. An attempt is made when a display is
    connected to a device that lacks an internal display.
  </summary>
</histogram>

<histogram name="Power.FirmwareResumeTimeOnAC" units="ms"
    expires_after="2022-03-31">
  <owner>puthik@chromium.org</owner>
  <owner>chromeos-platform-power@google.com</owner>
  <summary>
    The time that the firmware took to resume the Chrome OS device from
    suspend-to-RAM state when running on AC at pre-suspend time.
  </summary>
</histogram>

<histogram name="Power.FirmwareResumeTimeOnBattery" units="ms"
    expires_after="2022-03-31">
  <owner>puthik@chromium.org</owner>
  <owner>chromeos-platform-power@google.com</owner>
  <summary>
    The time that the firmware took to resume the Chrome OS device from
    suspend-to-RAM state when running on battery at pre-suspend time.
  </summary>
</histogram>

<histogram
    name="Power.ForegroundBatteryDrain.30SecondsAvg{Exclusive}{DarkeningType}"
    units="uAh" expires_after="2022-11-07">
  <owner>eseckler@chromium.org</owner>
  <owner>skyostil@chromium.org</owner>
  <summary>
    Periodically samples the battery capacity drained while Chrome is the
    foreground app and the device is on battery power {DarkeningType}. Sampled
    every 30 seconds while foregrounded. Also sampled when Chrome is
    backgrounded or the device connects to a charger. {Exclusive}

    Sample values are reported in microampere-hours and averaged over successive
    sampling points without a change in capacity counter values. Since the
    capacity counter resolution differs between device models, averaging the
    values allows us to make comparisons between frequent small capacity drops
    and infrequent large drops. For example, a 20,000 uAh drop over two
    successive periods of 30 seconds will be reported as two samples of 10,000
    uAh.

    For more details, see http://bit.ly/chrome-android-foreground-battery-drain.

    Only supported on Android. For WebView, the metric considers the time during
    in which at least one WebView is visible on the screen as
    &quot;foreground&quot; time.
  </summary>
  <token key="Exclusive">
    <variant name="" summary=""/>
    <variant name=".Exclusive"
        summary="However, only battery drain that can be attributed
                 exclusively to Chrome is reported: The first drain after
                 becoming the foreground app is not reported. As a result,
                 this metric typically doesn't include drain related to app
                 startup."/>
  </token>
  <token key="DarkeningType">
    <variant name="" summary=""/>
    <variant name=".DarkMode"
        summary="and the browser has dark theme preferred (web page darkening
                 only) for all WebContents"/>
    <variant name=".ForcedDarkMode"
        summary="and the browser has forced dark mode (user-agent darkening)
                 enabled for all WebContents"/>
    <variant name=".LightMode"
        summary="and the browser has forced dark mode disabled and light
                 theme preferred for all WebContents"/>
    <variant name=".MixedMode"
        summary="and there is a mix of WebContents that have forced dark mode
                 enabled, dark theme preferred, or light theme preferred"/>
  </token>
</histogram>

<histogram name="Power.ForegroundBatteryDrain.30Seconds{Exclusive}" units="uAh"
    expires_after="2022-11-07">
  <owner>eseckler@chromium.org</owner>
  <owner>skyostil@chromium.org</owner>
  <summary>
    Periodically samples the battery capacity drained while Chrome is the
    foreground app and the device is on battery power. Sampled every 30 seconds
    while foregrounded. Also sampled when Chrome is backgrounded or the device
    connects to a charger. {Exclusive}

    Sample values are reported as provided by the battery capacity counter (in
    microampere-hours). Because the resolution of this counter is rather coarse
    (usually between 500 and 50,000 uAh), the uAh value may have been drained
    over a longer time period than 30 seconds. See also
    Power.ForegroundBatteryDrain.30SecondsAvg, which averages the values over
    successive sampling points without change in counter values.

    Only supported on Android. For WebView, the metric considers the time during
    in which at least one WebView is visible on the screen as
    &quot;foreground&quot; time.
  </summary>
  <token key="Exclusive">
    <variant name="" summary=""/>
    <variant name=".Exclusive"
        summary="However, only battery drain that can be attributed
                 exclusively to Chrome is reported: The first drain after
                 becoming the foreground app is not reported. As a result,
                 this metric typically doesn't include drain related to app
                 startup."/>
  </token>
</histogram>

<histogram name="Power.ForegroundBatteryDrain.TimeBetweenEvents" units="ms"
    expires_after="2021-07-03">
  <obsolete>
    Obsolete in M93, no longer needed.
  </obsolete>
  <owner>eseckler@chromium.org</owner>
  <owner>skyostil@chromium.org</owner>
  <summary>
    A companion metric for Power.ForegroundBatteryDrain.30SecondsAvg which
    reports the time interval between successive capacity drops reported by the
    battery manager.

    Only supported on Android.
  </summary>
</histogram>

<histogram name="Power.ForegroundBatteryDrain{Exclusive}" units="0.1 mAh"
    expires_after="2022-11-07">
  <owner>eseckler@chromium.org</owner>
  <owner>skyostil@chromium.org</owner>
  <summary>
    Records a sample for every 0.1 milliampere-hours of battery capacity that
    are drained while Chrome is the foreground app and the device is on battery
    power. The battery counter is inspected every 30 seconds while foregrounded.
    It is also inspected when Chrome is backgrounded or the device connects to a
    charger. The histogram thus shows the total sum of battery capacity consumed
    across all users. {Exclusive}

    Only supported on Android. For WebView, the metric considers the time during
    in which at least one WebView is visible on the screen as
    &quot;foreground&quot; time.

    For a histogram of daily per-user values, see the computed histogram
    Power.DailyForegroundBatteryDrain.
  </summary>
  <token key="Exclusive">
    <variant name="" summary=""/>
    <variant name=".Exclusive"
        summary="However, only battery drain that can be attributed
                 exclusively to Chrome is reported: The first drain after
                 becoming the foreground app is not reported. As a result,
                 this metric typically doesn't include drain related to app
                 startup."/>
  </token>
</histogram>

<histogram name="Power.ForegroundRadio.SignalLevel.{NetworkType}"
    enum="RadioSignalLevel" expires_after="2022-07-03">
  <owner>eseckler@chromium.org</owner>
  <owner>khokhlov@google.com</owner>
  <owner>skyostil@chromium.org</owner>
  <summary>
    Periodically samples the radio (cellular/wifi) signal strength level while
    Chrome is the foreground app and the device is on battery power. Sampled
    every 30 seconds and when Chrome is backgrounded or the device connects to a
    charger.

    Only supported on Android.
  </summary>
  <token key="NetworkType">
    <variant name="Cell"/>
    <variant name="Wifi"/>
  </token>
</histogram>

<histogram name="Power.ForegroundRadio.Wakeups.Cell.30Seconds"
    enum="RadioSignalLevel" expires_after="2022-07-03">
  <owner>eseckler@chromium.org</owner>
  <owner>khokhlov@google.com</owner>
  <owner>skyostil@chromium.org</owner>
  <summary>
    Counts the number of radio wakeups while Chrome is the foreground app, the
    device is on battery power and connection type is cellular. Values are
    distributed across buckets according to the radio signal quality.

    Caveat: signal quality is measured at the end of 30-sec period, so it might
    not reflect the quality during the entire period.

    Only supported on Android. Disabled by default. Please supply the
    ForegroundRadioStateCountWakeups feature flag to turn this metric on.
  </summary>
</histogram>

<histogram name="Power.ForegroundRadio.{Direction}KiB.{NetworkType}.30Seconds"
    enum="RadioSignalLevel" expires_after="2022-07-03">
  <owner>eseckler@chromium.org</owner>
  <owner>khokhlov@google.com</owner>
  <owner>skyostil@chromium.org</owner>
  <summary>
    Periodically samples the number of kibibytes received over network while
    Chrome is the foreground app and the device is on battery power. Sampled
    every 30 seconds and when Chrome is backgrounded or the device connects to a
    charger. Values are distributed across buckets according to the radio signal
    quality.

    Caveat: signal quality is measured at the end of 30-sec period, so it might
    not reflect the quality during the entire period.

    Only supported on Android.
  </summary>
  <token key="Direction">
    <variant name="Received"/>
    <variant name="Sent"/>
  </token>
  <token key="NetworkType">
    <variant name="Cell"/>
    <variant name="Wifi"/>
  </token>
</histogram>

<histogram name="Power.FrameDamageAreaInDip.{ProcessType}" units="dip"
    expires_after="M98">
  <owner>eseckler@chromium.org</owner>
  <owner>skyostil@chromium.org</owner>
  <summary>
    Damaged area of a LayerTree's CompositorFrame in device-independent pixels.
    Recorded every time a new frame is produced.
  </summary>
  <token key="ProcessType">
    <variant name="Browser"/>
    <variant name="Renderer"/>
  </token>
</histogram>

<histogram name="Power.FrameDamageDiagonalInDip.{ProcessType}" units="dip"
    expires_after="M98">
  <owner>eseckler@chromium.org</owner>
  <owner>skyostil@chromium.org</owner>
  <summary>
    Diagonal length of the damaged area of a LayerTree's CompositorFrame in
    device-independent pixels. Recorded every time a new frame is produced.
  </summary>
  <token key="ProcessType">
    <variant name="Browser"/>
    <variant name="Renderer"/>
  </token>
</histogram>

<histogram name="Power.IdleCpuLoad.{ProcessType}" units="%"
    expires_after="2022-10-04">
  <owner>eseckler@chromium.org</owner>
  <owner>khokhlov@chromium.org</owner>
  <summary>
    Records the average CPU load caused by the corresponding process over the
    last 5 sec (or more) of Idle power mode. Emitted at the end of each such
    period, so not more often that once in 5 sec. Note that CPU load can be
    greater than 100% on milti-core systems.
  </summary>
  <token key="ProcessType">
    <variant name="Browser"/>
    <variant name="GPU"/>
    <variant name="Other"/>
    <variant name="Renderer"/>
  </token>
</histogram>

<histogram name="Power.IdleScreenDimCountDaily" units="count"
    expires_after="2022-04-17">
  <owner>tbroch@chromium.org</owner>
  <owner>napper@chromium.org</owner>
  <summary>
    Number of times that that the screen has been dimmed in response to user
    inactivity, reported daily. The count is accumulated through the day,
    spanning reboots, and sent once the system clock indicates that a full day
    or more has passed since the last report. If the system is suspended or off
    for more than a day, the current count will be reported immediately the next
    time the system boots, but the skipped days will not be reported. Chrome OS
    only.
  </summary>
</histogram>

<histogram name="Power.IdleScreenOffCountDaily" units="count"
    expires_after="2022-05-01">
  <owner>tbroch@chromium.org</owner>
  <owner>napper@chromium.org</owner>
  <summary>
    Number of times that that the screen has been turned off in response to user
    inactivity, reported daily. The count is accumulated through the day,
    spanning reboots, and sent once the system clock indicates that a full day
    or more has passed since the last report. If the system is suspended or off
    for more than a day, the current count will be reported immediately the next
    time the system boots, but the skipped days will not be reported. Chrome OS
    only.
  </summary>
</histogram>

<histogram name="Power.IdleSuspendCountDaily" units="count"
    expires_after="2022-05-01">
  <owner>tbroch@chromium.org</owner>
  <owner>napper@chromium.org</owner>
  <summary>
    Number of times that that the system has suspended in response to user
    inactivity, reported daily. The count is accumulated through the day,
    spanning reboots, and sent once the system clock indicates that a full day
    or more has passed since the last report. If the system is suspended or off
    for more than a day, the current count will be reported immediately the next
    time the system boots, but the skipped days will not be reported. Chrome OS
    only.
  </summary>
</histogram>

<histogram name="Power.IdleTimeAfterDimOnAC" units="ms"
    expires_after="2022-04-24">
  <owner>tbroch@chromium.org</owner>
  <owner>napper@chromium.org</owner>
  <summary>
    Chrome OS user idle time since the screen dimmed sampled when the user
    becomes active again if the device runs on AC.
  </summary>
</histogram>

<histogram name="Power.IdleTimeAfterDimOnBattery" units="ms"
    expires_after="2022-04-17">
  <owner>tbroch@chromium.org</owner>
  <owner>napper@chromium.org</owner>
  <summary>
    Chrome OS user idle time since the screen dimmed sampled when the user
    becomes active again if the device runs on battery.
  </summary>
</histogram>

<histogram name="Power.IdleTimeAfterScreenOffOnAC" units="ms"
    expires_after="2022-05-01">
  <owner>tbroch@chromium.org</owner>
  <owner>napper@chromium.org</owner>
  <summary>
    Chrome OS user idle time since the screen turned off sampled when the user
    becomes active again if the device runs on AC.
  </summary>
</histogram>

<histogram name="Power.IdleTimeAfterScreenOffOnBattery" units="ms"
    expires_after="2022-04-17">
  <owner>tbroch@chromium.org</owner>
  <owner>napper@chromium.org</owner>
  <summary>
    Chrome OS user idle time since the screen turned off sampled when the user
    becomes active again if the device runs on battery.
  </summary>
</histogram>

<histogram name="Power.IdleTimeOnAC" units="ms" expires_after="2022-04-24">
  <owner>tbroch@chromium.org</owner>
  <owner>napper@chromium.org</owner>
  <summary>
    Chrome OS user idle time sampled when the user becomes active again if the
    device runs on AC.
  </summary>
</histogram>

<histogram name="Power.IdleTimeOnBattery" units="ms" expires_after="2021-10-17">
  <owner>tbroch@chromium.org</owner>
  <owner>napper@chromium.org</owner>
  <summary>
    Chrome OS user idle time sampled when the user becomes active again if the
    device runs on battery.
  </summary>
</histogram>

<histogram name="Power.KernelResumeTimeOnAC" units="ms"
    expires_after="2021-10-17">
  <owner>puthik@chromium.org</owner>
  <owner>chromeos-platform-power@google.com</owner>
  <summary>
    The time that the kernel took to resume the Chrome OS device from
    suspend-to-RAM state when running on AC at pre-suspend time.
  </summary>
</histogram>

<histogram name="Power.KernelResumeTimeOnBattery" units="ms"
    expires_after="M85">
  <owner>tbroch@chromium.org</owner>
  <summary>
    The time that the kernel took to resume the Chrome OS device from
    suspend-to-RAM state when running on battery at pre-suspend time.
  </summary>
</histogram>

<histogram name="Power.KernelSuspendTimeOnAC" units="ms"
    expires_after="2020-01-26">
  <owner>tbroch@chromium.org</owner>
  <summary>
    The time that the kernel took to suspend-to-RAM the Chrome OS device when
    running on AC.
  </summary>
</histogram>

<histogram name="Power.KernelSuspendTimeOnBattery" units="ms"
    expires_after="2022-04-10">
  <owner>puthik@chromium.org</owner>
  <owner>chromeos-platform-power@google.com</owner>
  <summary>
    The time that the kernel took to suspend-to-RAM the Chrome OS device when
    running on battery.
  </summary>
</histogram>

<histogram name="Power.KeyboardBacklightLevel" units="%"
    expires_after="2020-06-21">
  <owner>tbroch@chromium.org</owner>
  <summary>
    The level of the keyboard backlight as a percentage. Sampled every 30
    seconds.
  </summary>
</histogram>

<histogram name="Power.LengthOfSession" units="seconds"
    expires_after="2021-10-17">
  <owner>puthik@chromium.org</owner>
  <owner>chromeos-platform-power@google.com</owner>
  <summary>
    The length of time, in seconds, that a user spent in a single session.
    Values for this metric are clamped to 12 hours, so the last bucket should be
    considered to be including all metrics above 12 hours.
  </summary>
</histogram>

<histogram name="Power.LidClosedSuspendCountDaily" units="count"
    expires_after="2021-10-10">
  <owner>puthik@chromium.org</owner>
  <owner>chromeos-platform-power@google.com</owner>
  <summary>
    Number of times that that the system has suspended in response to its lid
    being closed, reported daily. The count is accumulated through the day,
    spanning reboots, and sent once the system clock indicates that a full day
    or more has passed since the last report. If the system is suspended or off
    for more than a day, the current count will be reported immediately the next
    time the system boots, but the skipped days will not be reported. Chrome OS
    only.
  </summary>
</histogram>

<histogram base="true" name="Power.Mac" units="mW" expires_after="2022-07-03">
  <owner>olivierli@chromium.org</owner>
  <owner>markchang@chromium.org</owner>
  <summary>
    Instantaneous power consution in milliwatts, for the system as a whole and
    broken down by component. Only recorded on macOS. Only valid on Intel based
    systems. NB: The collection method was changed in May 2019, which may look
    like a regression in timeline view.
  </summary>
</histogram>

<histogram name="Power.Mac.AppleSMCOpened" enum="BooleanSuccess"
    expires_after="2022-05-01">
  <owner>lgrey@chromium.org</owner>
  <summary>
    When metrics collection started, records true if a handle to the System
    Management Controller (SMC) was successfully opened to monitor power
    consumption, false otherwise. If false, a system API might have changed in a
    new version of macOS, or Chrome might be running in a nonstandard
    environment (VM, hackintosh). Only recorded on macOS.
  </summary>
</histogram>

<histogram name="Power.Mac.BatteryDischarge" units="hundredth of percent"
    expires_after="2021-08-15">
  <obsolete>
    Replaced with cross-platform Power.BatteryDischargeRate2 03/2021.
  </obsolete>
  <owner>olivierli@chromium.org</owner>
  <owner>lgrey@chromium.org</owner>
  <summary>
    Every minute after startup a measure of the remaining and maximum battery
    capacity is taken. Then a ratio of the remaining capacity over the maximum
    capicity is calculated and scaled by 10000. (For example: 13 / 2000 = 0.0065
    ; 0.0065 * 10000 = 65). Power.Mac.BatteryDischarge is the the delta in this
    relative capacity measure compaired to the measurement that was taken a
    minute before. This metric is only recorded when on battery power. Only
    recorded on macOS.
  </summary>
</histogram>

<histogram name="Power.Mac.IsOnBattery" enum="BooleanOnBattery"
    expires_after="2021-02-21">
  <obsolete>
    Replaced with Power.Mac.IsOnBattery2 09/2020 as it was broken.
  </obsolete>
  <owner>lgrey@chromium.org</owner>
  <summary>
    Whether the user's machine is on battery power. Sampled once per minute.
    Warning: This incorrectly logs desktop Macs as being on battery power.
    Replaced by Power.Mac.IsOnBattery2.
  </summary>
</histogram>

<histogram name="Power.Mac.IsOnBattery2" enum="BooleanOnBattery"
    expires_after="2022-04-03">
  <owner>avi@chromium.org</owner>
  <owner>lgrey@chromium.org</owner>
  <summary>
    Whether the user's machine is on battery power. Sampled once per minute.
    Unlike Power.Mac.IsOnBattery, this correctly logs desktop Macs as not being
    on battery.
  </summary>
</histogram>

<histogram name="Power.Mac.ThermalState" enum="MacThermalState"
    expires_after="2022-05-13">
  <owner>lgrey@chromium.org</owner>
  <owner>olivierli@chromium.org</owner>
  <summary>
    Thermal state of the user's machine as reported by macOS's [NSProcessInfo
    thermalState]. Sampled once per minute.
  </summary>
</histogram>

<histogram name="Power.MainScreenBrightness" units="%"
    expires_after="2021-11-30">
  <obsolete>
    Replaced by Power.MainScreenBrightness2 in July 2021. The new histogram
    allows value superior to 100% as sometime reported by the OS.
  </obsolete>
  <owner>fdoray@chromium.org</owner>
  <owner>catan-team@chromium.org</owner>
  <summary>
    The level of the screen backlight in percent if it's not available. Only
    recorded on Mac devices with an Intel processor. Recorded every 2 minutes
  </summary>
</histogram>

<histogram name="Power.MainScreenBrightness2" units="%"
    expires_after="2021-11-30">
  <owner>fdoray@chromium.org</owner>
  <owner>catan-team@chromium.org</owner>
  <summary>
    The level of the screen backlight in percent if it's not available. Only
    recorded on Mac devices with an Intel processor. Recorded every 2 minutes.
    Note: the reported value can sometime exceed 100%, this histogram allows
    value up to 150%.
  </summary>
</histogram>

<histogram name="Power.MainScreenBrightnessAvailable" units="Boolean"
    expires_after="2022-04-10">
  <owner>fdoray@chromium.org</owner>
  <owner>catan-team@chromium.org</owner>
  <summary>
    Indicates if the screen backlight level value is available. Recorded every
    time an attempt to record |Power.MainScreenBrightness| is made.
  </summary>
</histogram>

<histogram name="Power.MetricsDailyEventInterval" enum="DailyEventIntervalType"
    expires_after="M100">
  <owner>puthik@chromium.org</owner>
  <owner>chromeos-platform-power@google.com</owner>
  <summary>
    Reasons why power-management-related daily metrics were reported. Chrome OS
    only.
  </summary>
</histogram>

<histogram name="Power.NumberOfAlsAdjustmentsPerSession" units="units"
    expires_after="2022-05-01">
  <owner>tbroch@chromium.org</owner>
  <owner>napper@chromium.org</owner>
  <summary>
    The number of times that the Automatic Light Sensor (ALS) adjusted the
    brightness during a session. Values for this metric are clamped to 10k
    count, so the last bucket should be considered to be including all metrics
    above 10k.
  </summary>
</histogram>

<histogram name="Power.NumberOfSessionsPerCharge" units="units"
    expires_after="2022-03-31">
  <owner>puthik@chromium.org</owner>
  <owner>chromeos-platform-power@google.com</owner>
  <summary>
    The number of user sessions that occured since the last time that the device
    was charged. Values for this metric are clamped at 10k, so the last bucket
    should be considered to include all metrics about 10k.
  </summary>
</histogram>

<histogram name="Power.PowerButtonAcknowledgmentDelay" units="ms"
    expires_after="M100">
  <owner>puthik@chromium.org</owner>
  <owner>chromeos-platform-power@google.com</owner>
  <summary>
    The amount of time between the user pressing the power button and Chrome
    acknowledging the button-down event on Chrome OS. Values for this metric are
    capped to two seconds.
  </summary>
</histogram>

<histogram name="Power.PowerButtonDownTime" units="ms"
    expires_after="2022-04-24">
  <owner>puthik@chromium.org</owner>
  <owner>chromeos-platform-power@google.com</owner>
  <summary>
    The amount of time between the user pressing the power button and releasing
    it on Chrome OS.
  </summary>
</histogram>

<histogram name="Power.PowerButtonMenuAction" enum="PowerButtonMenuActionType"
    expires_after="2021-12-05">
  <owner>minch@chromium.org</owner>
  <owner>xdai@chromium.org</owner>
  <summary>Actions performed while the power button menu is open.</summary>
</histogram>

<histogram name="Power.PowerButtonPressInLaptopMode"
    enum="PowerButtonPressType" expires_after="2021-12-26">
  <owner>minch@chromium.org</owner>
  <owner>xdai@chromium.org</owner>
  <summary>
    Press power button in laptop mode will result in different scenarios
    according to the power button up state. Counts the different power button
    press scenarios in laptop mode.
  </summary>
</histogram>

<histogram name="Power.PowerButtonPressInTabletMode"
    enum="PowerButtonPressType" expires_after="2022-05-01">
  <owner>minch@chromium.org</owner>
  <owner>xdai@chromium.org</owner>
  <summary>
    Press power button in tablet mode will result in different scenarios
    according to the power button up state. Counts the different power button
    press scenarios in tablet mode.
  </summary>
</histogram>

<histogram name="Power.PowerScheduler.ProcessPowerModeChange.{ProcessType}"
    enum="PowerMode" expires_after="2022-10-04">
  <owner>eseckler@chromium.org</owner>
  <owner>skyostil@chromium.org</owner>
  <summary>
    Records the new value of the {ProcessType} process power mode every time a
    change is detected (happens on the order of once per second).
  </summary>
  <token key="ProcessType">
    <variant name="Browser" summary="browser"/>
    <variant name="GPU" summary="GPU"/>
    <variant name="Other" summary="other type of"/>
    <variant name="Renderer" summary="renderer"/>
  </token>
</histogram>

<histogram name="Power.PowerScheduler.ThrottlingDuration" units="ms"
    expires_after="2022-10-04">
  <owner>eseckler@chromium.org</owner>
  <owner>skyostil@chromium.org</owner>
  <summary>
    Duration during which CPU throttling was active. Only recorded when a CPU
    throttling policy is active (e.g. throttle while idle). A sample is recorded
    every time throttling stops (e.g. when exiting idle state).
  </summary>
</histogram>

<histogram name="Power.PowerScheduler.ThrottlingDurationPerCpuAffinityMode"
    enum="CpuAffinityMode" expires_after="2022-10-04">
  <owner>eseckler@chromium.org</owner>
  <owner>skyostil@chromium.org</owner>
  <summary>
    Duration in milliseconds during which CPU throttling was active, split by
    the CPU affinity for that duration. Only recorded when a CPU throttling
    policy is active (e.g. throttle while idle). A sample is recorded every time
    throttling stops (e.g. when exiting idle state), on the order of once per
    second.
  </summary>
</histogram>

<histogram name="Power.PowerSupplyMaxPower" units="W"
    expires_after="2022-04-17">
  <owner>bleung@chromium.org</owner>
  <owner>puthik@chromium.org</owner>
  <owner>chromeos-platform-power@google.com</owner>
  <summary>
    The maximum power supported by the connected power supply on Chrome OS. A
    sample is reported every time that the power manager polls sysfs (typically
    every 30 seconds) and sees a connected supply.
  </summary>
</histogram>

<histogram name="Power.PowerSupplyMaxVoltage" units="V"
    expires_after="2022-04-17">
  <owner>bleung@chromium.org</owner>
  <owner>puthik@chromium.org</owner>
  <owner>chromeos-platform-power@google.com</owner>
  <summary>
    The maximum voltage supported by the connected power supply on Chrome OS. A
    sample is reported every time that the power manager polls sysfs (typically
    every 30 seconds) and sees a connected supply.
  </summary>
</histogram>

<histogram name="Power.PowerSupplyType" enum="PowerSupplyType"
    expires_after="2022-04-10">
  <owner>bleung@chromium.org</owner>
  <owner>puthik@chromium.org</owner>
  <owner>chromeos-platform-power@google.com</owner>
  <summary>
    The type of the connected power supply on Chrome OS. A sample is reported
    every time that the power manager polls sysfs (typically every 30 seconds)
    and sees a connected supply.
  </summary>
</histogram>

<histogram name="Power.ShutdownReason" enum="ShutdownReason"
    expires_after="M85">
  <owner>tbroch@chromium.org</owner>
  <summary>
    The reason for the Chrome OS power manager shutting down or rebooting the
    system.
  </summary>
</histogram>

<histogram name="Power.SmartCharging.Messages" enum="SmartChargingMessages"
    expires_after="2022-05-01">
  <owner>thanhdng@chromium.org</owner>
  <owner>napper@chromium.org</owner>
  <summary>Type of messages that are reported by smart charging.</summary>
</histogram>

<histogram name="Power.SuspendAttempt" enum="SuspendAttempt"
    expires_after="2022-04-17">
  <owner>puthik@chromium.org</owner>
  <owner>chromeos-platform-power@google.com</owner>
  <summary>
    The number of suspend attempts on Chrome OS. Samples are reported before
    each attempt, so this histogram may include cases where the system crashed
    instead of suspending.
  </summary>
</histogram>

<histogram name="Power.SuspendAttemptsBeforeCancel" units="units"
    expires_after="2022-04-24">
  <owner>puthik@chromium.org</owner>
  <owner>chromeos-platform-power@google.com</owner>
  <summary>
    The number of suspend attempts performed for a single suspend request (e.g.
    triggered by the lid being closed) that was eventually canceled on Chrome
    OS. This also includes requests that were canceled due to the system
    eventually shutting down due to repeated suspend failures.
  </summary>
</histogram>

<histogram name="Power.SuspendAttemptsBeforeSuccess" units="units"
    expires_after="2022-04-24">
  <owner>puthik@chromium.org</owner>
  <owner>chromeos-platform-power@google.com</owner>
  <summary>
    The number of suspend attempts performed for a single suspend request (e.g.
    triggered by the lid being closed) that eventually succeeded on Chrome OS.
    This includes the successful attempt.
  </summary>
</histogram>

<histogram name="Power.SuspendResult" enum="SuspendResult"
    expires_after="2022-04-24">
  <owner>puthik@chromium.org</owner>
  <owner>chromeos-platform-power@google.com</owner>
  <summary>
    The results of suspend attempts on Chrome OS. Samples are reported after
    each attempt.
  </summary>
</histogram>

<histogram name="Power.TimeInSuspendAtBoot" units="minutes"
    expires_after="2021-03-15">
  <owner>tbroch@chromium.org</owner>
  <summary>
    Chrome OS time in minutes spent in suspend-to-RAM mode sampled at boot
    (i.e., the device most likely ran out of battery while in suspend).
  </summary>
</histogram>

<histogram name="Power.TimeInSuspendAtResume" units="minutes"
    expires_after="2021-04-04">
  <owner>tbroch@chromium.org</owner>
  <summary>
    Chrome OS time in minutes spent in suspend-to-RAM mode sampled at resume.
  </summary>
</histogram>

<histogram name="Power.UserBrightnessAdjustmentsPerSessionOnAC" units="units"
    expires_after="2022-05-01">
  <owner>tbroch@chromium.org</owner>
  <owner>napper@chromium.org</owner>
  <summary>
    The number of times that the user adjusted the brightness during a session
    when on AC. Values for this metric are clamped to 10k count, so the last
    bucket should be considered to be including all metrics above 10k.
  </summary>
</histogram>

<histogram name="Power.UserBrightnessAdjustmentsPerSessionOnBattery"
    units="units" expires_after="2021-10-25">
  <owner>tbroch@chromium.org</owner>
  <owner>napper@chromium.org</owner>
  <summary>
    The number of times that the user adjusted the brightness during a session
    when on battery. Values for this metric are clamped to 10k count, so the
    last bucket should be considered to be including all metrics above 10k.
  </summary>
</histogram>

<histogram name="PowerML.DimImminent.Action" enum="PowerMLDimImminentAction"
    expires_after="2022-05-01">
  <owner>napper@chromium.org</owner>
  <owner>thanhdng@chromium.org</owner>
  <summary>
    What happens when UserActivityManager receives a screen dim imminent
    notification. Only applicable to Chrome OS.
  </summary>
</histogram>

<histogram name="PowerML.ModelDim.Result" enum="PowerMLFinalResult"
    expires_after="2022-05-01">
  <owner>napper@chromium.org</owner>
  <owner>thanhdng@chromium.org</owner>
  <summary>
    What happens after screen is dimmed following model instruction. Only
    applicable to Chrome OS.
  </summary>
</histogram>

<histogram name="PowerML.ModelNoDim.Result" enum="PowerMLFinalResult"
    expires_after="2022-05-01">
  <owner>napper@chromium.org</owner>
  <owner>thanhdng@chromium.org</owner>
  <summary>
    What happens after screen dim is deferred following model instruction. Only
    applicable to Chrome OS.
  </summary>
</histogram>

<histogram name="PowerML.NonModelDim.Result" enum="PowerMLFinalResult"
    expires_after="2022-03-27">
  <owner>napper@chromium.org</owner>
  <owner>thanhdng@chromium.org</owner>
  <summary>
    What happens after screen is dimmed by powerd by ignoring the model
    instruction. Only applicable to Chrome OS.
  </summary>
</histogram>

<histogram name="PowerML.PreviousEventLogging.Result"
    enum="PowerMLPreviousEventLoggingResult" expires_after="2020-12-13">
  <owner>napper@chromium.org</owner>
  <owner>thanhdng@chromium.org</owner>
  <summary>
    Status of logging previous idle event after a screen dim imminent signal is
    received. Only applicable to Chrome OS.
  </summary>
</histogram>

<histogram name="PowerML.SmartDimComponent.LoadComponentEvent"
    enum="PowerMLSmartDimComponentLoadComponentEvent"
    expires_after="2022-04-17">
  <owner>alanlxl@chromium.org</owner>
  <owner>amoylan@chromium.org</owner>
  <owner>napper@chromium.org</owner>
  <summary>
    Records the event (various failures or success) of loading smart dim
    component. Only applicable to Chrome OS.
  </summary>
</histogram>

<histogram name="PowerML.SmartDimComponent.VersionType"
    enum="PowerMLSmartDimComponentVersionType" expires_after="2022-04-24">
  <owner>alanlxl@chromium.org</owner>
  <owner>amoylan@chromium.org</owner>
  <owner>napper@chromium.org</owner>
  <summary>
    Records the type of expected version (default, experimental or empty) used
    by smart dim component installer. Only applicable to Chrome OS.
  </summary>
</histogram>

<histogram name="PowerML.SmartDimComponent.WorkerType"
    enum="PowerMLSmartDimComponentWorkerType" expires_after="2022-04-17">
  <owner>alanlxl@chromium.org</owner>
  <owner>amoylan@chromium.org</owner>
  <owner>napper@chromium.org</owner>
  <summary>
    Records the worker type that is used by smart dim ml agent to make a
    decision. Only applicable to Chrome OS.
  </summary>
</histogram>

<histogram name="PowerML.SmartDimFeature.WebPageInfoSource"
    enum="PowerMLSmartDimWebPageInfoSource" expires_after="2022-06-24">
  <owner>alanlxl@chromium.org</owner>
  <owner>amoylan@chromium.org</owner>
  <owner>napper@chromium.org</owner>
  <summary>
    The source of web page info in smart dim features, emitted everytime smart
    dim is requested.
  </summary>
</histogram>

<histogram name="PowerML.SmartDimModel.RequestCanceledDuration" units="ms"
    expires_after="2022-04-24">
  <owner>amoylan@chromium.org</owner>
  <owner>napper@chromium.org</owner>
  <owner>napper@chromium.org</owner>
  <owner>pmalani@chromium.org</owner>
  <summary>
    The time elapsed between a Smart Dim Inference Request being sent to the ML
    model, and the request being canceled before the result is returned.
  </summary>
</histogram>

<histogram name="PowerML.SmartDimModel.RequestCompleteDuration" units="ms"
    expires_after="2022-05-01">
  <owner>amoylan@chromium.org</owner>
  <owner>napper@chromium.org</owner>
  <owner>napper@chromium.org</owner>
  <owner>pmalani@chromium.org</owner>
  <summary>
    The time elapsed between a Smart Dim Inference Request being sent to the ML
    model and a result being returned.
  </summary>
</histogram>

<histogram name="PowerML.SmartDimModel.Result"
    enum="PowerMLSmartDimModelResult" expires_after="2022-04-24">
  <owner>napper@chromium.org</owner>
  <owner>thanhdng@chromium.org</owner>
  <summary>
    This is the status code returned by the model when calculating a user
    inactivity score. If it is any value other than 0 (success), then some issue
    has occurred in the score calculation, either because preprocess was not
    loaded or parsed correctly, or the preprocessor failed to process a
    RankerExample. Only applicable to Chrome OS.
  </summary>
</histogram>

<histogram name="PowerML.SmartDimParameter.Result"
    enum="PowerMLSmartDimParameterResult" expires_after="2022-05-01">
  <owner>napper@chromium.org</owner>
  <owner>thanhdng@chromium.org</owner>
  <summary>
    The result of parsing the dim threshold parameter value. Only applicable to
    Chrome OS.
  </summary>
</histogram>

</histograms>

</histogram-configuration>
